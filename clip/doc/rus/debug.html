<!DOCTYPE html PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>

  <meta http-equiv="Content-Type" content="text/html; charset=koi8-r">

  <link rel="STYLESHEET" type="text/css" href="styl.css">
  <title>Clipper compiler</title>
</head>
 <body>

<h3>  Отладчик(и)</h3>

<p>Самый простой способ отладки - это в тексте программы в нужных  местах поставить примерно вот такие вызовы:</p>
<font color="#3333ff">   OUTLOG(__FILE__,__LINE__, var1,var2,....,varn)</font><br>

<p>и, после выполнения программы, проанализировать содержимое *.log  файла.
Это помогает, когда ни один из ниже перечисленных отладчиков  не помогает.
</p>
<p><b>  clip_dbg</b> - отладчик в стиле gdb (gnu debug) умеет тоже, что и
остальные отладчики, только сервиса предоставляет ровно столько, сколько
может предоставить командная строка без "человеческого" интерфейса.</p>

<p>  Чтобы начать отладку при помощи clip_dbg, надо основную программу запустить
с ключиком --debug (или --stop для ожидания команды "старт" от отладчика)
и с другой консоли запустить clip_dbg &lt;Номер_отлаживаемого_процесса&gt;.
Далее для изучения в clip_dbg есть команда help или help &lt;суб_команда&gt;.</p>
<p>Особое внимание на этом отладчике заострять не хочется, но все же его
надо  иметь ввиду, так как это очень простая программа имеющая минимум "наведенных"
 глюков. И когда возникает вопрос "глючит программа или отладчик ?" лучше
пользоваться этим отладчиком чем более навороченным и приятным :).</p>

<p><b>   clip_cld </b>- отладчик программ, предназначен для интерактивного
контроля (пошагового ) выполнения программ и просмотр текущих состояний переменных.
Выполнен в стиле стандартного CLD из поставки CA-Clipper.   </p>
<p> Основное свойство отладчика - выполнять команды по управлению отлаживаемой
 программы. Команды можно задавать через меню, набирать их в окне "Команды"
 или запускать "скрипты" из файла. </p>

<p> <b>!</b> Кто привык пользоваться опцией "Монитор", ищите его в пункте
меню "View | Смотреть" - этот монитор существенно изменился.  </p>

<hr>
<h4> script-файлы </h4>
<p>Script-файлы содержат команды в той форме, в которой они вводятся в окне
 команд. По умолчанию эти файлы имеют расширение CLD.</p>

<p>Скрипт-файлы можно создавать обычным текстовым редактором. Считается что
одна строка в таком файле - одна команда.</p>
<p>Запуск скрипта производится командой INPUT (УПРАВЛЕНИЕ) "имя_файла" или
сокращенно I (У) "имя_файла". Задать стартовый скрипт можно при запуске отладчика
указанием имени файла в системной командной строке - clip_cld @cript_file.cld.
 Скрипт с именем init.cld, находящийся в текущем каталоге, будет вызван и
исполнен  автоматически. </p>
<p> </p>
<hr>
<h4> Команды </h4>
<p>   Команды могут описываться как на английском языке, так и на русском,
и для каждой команды есть сокращенный эквивалент. </p>
 <br>

<center>
<table border="0" cellpadding="7">
     <tr>
       <th> Формат команды </th>
       <th> Эквиваленты </th>
       <th> Описание команды</th>
     </tr>
     <tr>
       <td>connect</td>
       <td>co</td>
       <td>Производит подключение к отлаживаемой программе</td>
     </tr>
     <tr>
       <td>? &lt;выражение&gt;</td>
       <td>??</td>
       <td>Выводит результат выражения или переменной</td>
     </tr>
     <tr>
       <td>! &lt;имя_переменной&gt;</td>
       <td>!!</td>
       <td>Выводит значение переменной, в том числе и объявленной как local</td>
     </tr>
     <tr>
       <td>animate</td>
       <td>анимация,A,А</td>
       <td>Запускает программу в режиме анимации</td>
     </tr>
     <tr>
       <td>BREAKPOINT номер_строки [имя_файла]</td>
       <td>B,BP,ТО</td>
       <td>Устанавливает точку останова на строке в файле.</td>
     </tr>
     <tr>
       <td>CALLSTACK ON|OFF</td>
       <td>C,ВЫЗОВ</td>
       <td>Включает или выключает окно стека вызовов</td>
     </tr>
     <tr>
       <td>DELETE ALL BP|TP|WP</td>
       <td>D, УДАЛИТЬ</td>
       <td>Удаляет все точки останова или трассировки или просмотра</td>
     </tr>
     <tr>
       <td>DELETE BP|TP|WP номер_точки</td>
       <td>D, УДАЛИТЬ</td>
       <td>Удаляет указанную точку останова или трассировки или просмотра</td>
     </tr>
     <tr>
       <td>DOS</td>
       <td>OS</td>
       <td>Вызывает операционную систему</td>
     </tr>
     <tr>
       <td>FIND [искомая_строка]</td>
       <td>F,ПОИСК</td>
       <td>Осуществляет в окне редактора поиск указанной строки или запускает
	диалог для указания параметров поиска</td>
     </tr>
     <tr>
       <td>GO</td>
       <td>ПУСК</td>
       <td>Запускает отлаживаемую программу "без остановок"</td>
     </tr>
     <tr>
       <td>GOTO [номер_строки]</td>
       <td>G, ПЕРЕХОД</td>
       <td> 	Переводит курсор в окне редактора на указанную строку или запускает
	диалог для точного указания параметров перехода.</td>
     </tr>
     <tr>
       <td>HELP</td>
       <td>H,ПОМОЩЬ</td>
       <td>Вызывает окно помощи,скорее всего это будет вот этот самый текст.</td>
     </tr>
     <tr>
       <td>INPUT имя_файла.cld</td>
       <td>I,УПРАВЛЕНИЕ</td>
       <td>Выполняет указанный скрипт-файл с командами.</td>
     </tr>
     <tr>
       <td>LIST BP|TP|WP</td>
       <td>L,СПИСОК</td>
       <td>Выводит список точек останова, трассировки, просмотра</td>
     </tr>
     <tr>
       <td>NEXT</td>
       <td>N,СЛЕДУЮЩЕЕ</td>
       <td>Продолжает поиск по последним введенным правилам</td>
     </tr>
     <tr>
       <td>NUM ON|OFF</td>
       <td>НУМЕРАЦИЯ</td>
       <td>Включает или отключает режим нумерации строк в окне редактора.</td>
     </tr>
     <tr>
       <td>OUTPUT </td>
       <td>O,ЭКРАН</td>
       <td>Показывает экран отслеживаемой программы</td>
     </tr>
     <tr>
       <td>PREV</td>
       <td>P,ПРЕДЫДУЩЕЕ</td>
       <td>Производит поиск в обратную сторону в окне редактора</td>
     </tr>
     <tr>
       <td>QUIT</td>
       <td>Q,КОНЕЦ</td>
       <td>Закончить процесс отладки</td>
     </tr>
     <tr>
       <td>RESTART</td>
       <td>R,РЕСТАРТ</td>
       <td>Перезапускает отлаживаемую программу</td>
     </tr>
     <tr>
       <td>RESUME</td>
       <td>ИСХОДНОЕ</td>
       <td> Данная команда не поддерживается, так как отладчик может одновременно
 открывать несколько окон редакторов и позволяет между ними переключатся.
Но и считать эту команду ошибочной отладчик не будет</td>
     </tr>
     <tr>
       <td>SPEED задержка</td>
       <td>СКОРОСТЬ</td>
       <td>Устанавливает скорость анимации в десятых долях секунды и определяет
 паузу между выполняемыми операторами</td>
     </tr>
     <tr>
       <td>STEP</td>
       <td>S,ШАГ</td>
       <td>Выполняет одну строку отлаживаемой программы</td>
     </tr>
     <tr>
       <td>TP выражение</td>
       <td>T,ТТ,TRACEPOINT</td>
       <td> 	Устанавливает точку трассировки для "выражение". "Выражение"
может быть 	просто именем переменной.</td>
     </tr>
     <tr>
       <td>VIEW [имя_файла]</td>
       <td>V,ЗАГРУЗИТЬ</td>
       <td>Загружает файл в новое окно редактора, или вызывает диалог для
выбора файла.</td>
     </tr>
     <tr>
       <td>WP выражение</td>
       <td>W,ТЗ,VIEWPOINT</td>
       <td>Добавляет "выражение" в окно просмотра</td>
     </tr>
     <tr>
       <td>CONNECT имя_процесса | номер_процесса</td>
       <td>CO</td>
       <td>Подключится к процессу</td>
     </tr>
     <tr>
       <td>#</td>
       <td>*,rem</td>
       <td>Комментарий в скрипт-файле</td>
     </tr>

</table>
 </center>

<hr>
<h4> Окна </h4>
   На экране может быть одновременно несколько окон:
<ul>

  <li> Окно команд - предназначено для ввода команд и отображения результатов
 их выполнения. Всегда открыто, но не всегда видимо. Принимает команды отладчика
 как вводимые строки и отображает результаты их выполнения (если таковые имеются).
 Команды вводятся при помощи клавиатуры и выполняются после нажатия ENTER.
 Команды могут вводится независимо от того какое окно активно, но курсор
виден  только при активном окне команд. При активном окне команд клавиши управления
 курсором "вверх" и "вниз" могут использоваться для просмотра и исполнения
 предыдущих команд. </li>

  <li> Окна редактора - автоматически  открываются при переходе из файла
в файл или по команде VIEW. Строка  программы, содержащая текущий выполняемый
оператор, отображается выделенным  цветом. Те строки, на которых есть точки
остнова, также маркируются. </li>

  <li> Окно просмотра - отображает точки трассировки и их текущие значения.
 Открывается при задании хотя бы одной точки через меню или команды BP,TP,WP. 
Если активно окно просмотра, то по клавише ENTER производится редактирование
 значения выражения.  </li>

  <li> Окно монитора - отображает имена и значения переменных указанного
класса памяти. Открывается через меню или команду MONITOR.  При активном
окне монитора при нажатии клавиши ENTER производится редактирование значения
переменной.  </li>

  <li> Окно стека вызовов - отображает стек вызовов подпрограмм. </li>

  <li> Окно текущих установок SET - отображает таблицу текущих значений, возвращаемых
функцией SET. </li>

  <li> Окно просмотра информации об открытых БД. </li>

</ul>

<p>  В каждый момент активно только одно окно, выделенное рамкой повышенной
яркости.  Назначение/переключение активного окна производится клавишами Tab
или Shift+Tab.   </p>

<p>У каждого окна в правом верхнем углу указан его номер, по которому можно
 быстро переключатся при помощи клавиш Alt+1,Alt+2,...Alt+n по номеру окна.
 Указанные клавиши работают только в режиме скан-клавиатуры. Если используется
 режим ANSI-терминала, то должны работать клавиши Ctrl+Enter+1, ....</p>

<p>  Пункт меню "окна" содержит команды по управлению размерами и количеством
 окон на экране. </p>

<p>К сожалению произвольное управление размерами окон на сегодня не реализовано,
так как стандартные функции по управлению окнами из библиотеки CA-Tools этого
не позволяют.  </p>

<hr>
<h4> Клавиши управления </h4>

<p>Все клавиши, описанные в данном документе - это те которые установлены
по-умолчанию  и описаны в файле из дистрибутива tools/hotkeys.prg. Для удобства
пользователей  все клавиши можно переназначить аналогично как и в tools/hotkeys.prg.
Достаточно  создать файл $HOME/.clip/keymaps.prg, описать в нем горячие клавиши
и соответсвующие  им команды, скомпилировать этот файл с ключиком -p. Более
подробно о назначении  горячих клавиш читайте (пока нет места где об этом
можно почитать - лучше  загляните в tools/hotkeys.prg и вы все поймете).</p>

<hr>
<center> © Ю.Хныкин, <a href="mailto:uri@itk.ru">uri@itk.ru</a>
  , 2000 </center>

</body>
</html>

